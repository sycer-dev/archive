<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>sycerSMS</title>
    <meta name="author" content="Fyko">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <!-- Metadata -->
    <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/favicon-16x16.png">
    <link rel="manifest" href="/public/site.webmanifest">
    <meta name="msapplication-TileColor" content="#36393f">
    <meta name="theme-color" content="#36393f">

    <meta name="theme-color" content="#36393f">
    <meta name="apple-mobile-web-app-title" content="sycerSMS">
    <link rel="canonical" href="https://sms.sycer.dev/">

    <!-- Embed Data -->
    <meta name="author" content="sycerSMS">
    <meta name="description" content="Deliver time sensitive alerts with sycerSMS">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="sycerSMS">
    <meta property="og:title" content="sycerSMS">
    <meta property="og:description" content="Deliver time sensitive alerts with sycerSMS.">
    <meta property="og:url" content="https://sms.sycer.dev/">
    <meta property="og:image" content="/public/android-chrome-512x512.png">

    <!-- Design -->
    <script src="https://js.stripe.com/v3"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js></script>
    <link href="https://unpkg.com/caramel@2.0.0-beta/dist/css/caramel.min.css" rel="stylesheet">
    <script src="/public/sweetalert.min.js"></script>
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@3/dark.css" rel="stylesheet">

    <style>
        body {
            background-color: #2C2F33;
            color: white;
        }

        .card {
            margin: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            max-width: 900px;
        }
    </style>
</head>

<body onload="onload()">
	<main class="main">
        <div class="center">
            <div class="row">
                <div class="box col-12">
                    <div class="card">
                        <div id="content" class="content">
							<h3 style="font-weight: 900;"><%= server.name %></h3>
                            <h6 style="text-align: center; margin-top: -15px;"><a href="/@me">â¬… Go back</a></h6>
                            <hr>
                            <p>This server does not have access to sycerSMS.</p>
                            <button class="dark" onclick="window.open('<%= inviteURL %>', '_blank')" style="background-color: #9400D3;">
                                <i class="fas fa-link"></i> Invite Bot
                            </button>

							<button class="dark" id="update-billing" onclick="subscribe()" style="background-color: #008315;">
                                <i class="fas fa-store"></i> Subscribe ($20/month)
                            </button>
                            <hr>
                            <small>
                                &copy; Sycer Development LLC. - 
                                <a href="https://discord.gg/wGZ6SVaeW7" target="_blank">Support Server</a> - 
                                <a href="https://github.com/sycer-dev/terms/blob/master/README.md" target="_blank">Legal</a> - 
                                <a href="/logout">Logout</a>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://unpkg.com/caramel@2.0.0-beta/dist/js/caramel.min.js"></script>

    <script>
        const stripe = Stripe('<%= STRIPE_PUBLIC_KEY %>');

        async function subscribe() {
            const res = await fetch(`/api/activate/<%= server.id %>`, { method: 'POST' });
            const json = await res.json();

            if (json.type === 'error') {
                return swal({
                    icon: 'error',
                    title: 'An error occurred!',
                    text: json.message,
                });
            }
            return stripe.redirectToCheckout({ sessionId: json.sessionId });
        }
    </script>
</body>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151946240-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-151946240-1');
</script>

</html>
